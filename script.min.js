!function(){var n,t,o="sf_vid",i="https://api.spinfiliate.com/event",e=[],c=!1;async function r(n,t="GET",o=null,i={},e={}){try{if(e&&Object.keys(e).length>0){n+=`?${new URLSearchParams(e).toString()}`}const c={method:t.toUpperCase(),headers:{"Content-Type":"application/json",...i}};o&&"GET"!==t&&(c.body=JSON.stringify(o));const r=await fetch(n,c);if(!r.ok)throw new Error(`HTTP error! status: ${r.status}, statusText: ${r.statusText}`);return await r.json()}catch(n){throw n}}function s(n){e.push(n),c||a()}async function a(){if(0===e.length)return void(c=!1);c=!0;const n=e.shift();await n(),a()}if(window.spin={create:function(i,e,c){s((async()=>{n=i;const e=function(n){const t=`; ${document.cookie}`.split(`; ${n}=`);return 2===t.length?t.pop().split(";").shift():null}(o);e&&(t=e),c&&c()}))},detect:function(e={},c){s((async()=>{const s=e.referral_code_param||"ref";if(s){const e=(a=s,new URLSearchParams(window.location.search).get(a));if(e){const s={acc:n,refc:e};try{const n=await r(`${i}/visitor/`,"GET",null,{},s);!function(n,t,o=365,i="/"){const e=new Date;e.setTime(e.getTime()+24*o*60*60*1e3),document.cookie=`${n}=${t}; expires=${e.toUTCString()}; path=${i}`}(o,n.vid),t=n.vid,c&&c(null,n)}catch(n){c&&c(n,null)}}else c&&c("Referral code not found",null)}var a}))},customer:function(o,e={},c){s((async()=>{if(!t){return void(c&&c("Visitor id not found",null))}if(!o){return void(c&&c("Customer id not found",null))}const s={acc:n,vid:t,customer_id:o,options:e};try{const n=await r(`${i}/customer/`,"POST",s,{},{});c&&c(null,n)}catch(n){c&&c(n,null)}}))},conversion:function(o,e,c={},a){s((async()=>{if(!t){return void(a&&a("Visitor id not found",null))}if(!o){return void(a&&a("Conversion id not found",null))}const s={acc:n,vid:t,tid:o,amount:e||null,options:c};try{const n=await r(`${i}/conversion/`,"POST",s,{},{});a&&a(null,n)}catch(n){a&&a(n,null)}}))}},window.Spin.q&&window.Spin.q.length>0){const n=window.Spin.q.findIndex((function(n){return"create"===n[0]}));if(-1!==n){const t=window.Spin.q.splice(n,1)[0],o=Array.prototype.slice.call(t,1);"function"==typeof window.spin.create&&window.spin.create.apply(null,o)}window.Spin.q.forEach((function(n){const t=n[0],o=Array.prototype.slice.call(n,1);"create"!==t&&"function"==typeof window.spin[t]&&window.spin[t].apply(null,o)})),window.Spin.q=[]}}();
