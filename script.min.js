!function(){var t,n,o="sf_vid",i="https://api.spinfiliate.com/event",c=[],e=!1;async function s(t,n="GET",o=null,i={},c={}){try{if(c&&Object.keys(c).length>0){t+=`?${new URLSearchParams(c).toString()}`}const e={method:n.toUpperCase(),headers:{"Content-Type":"application/json",...i}};o&&"GET"!==n&&(e.body=JSON.stringify(o));const s=await fetch(t,e);if(!s.ok)throw new Error(`HTTP error! status: ${s.status}, statusText: ${s.statusText}`);return await s.json()}catch(t){throw t}}function r(t){c.push(t),e||a()}async function a(){if(0===c.length)return void(e=!1);e=!0;const t=c.shift();await t(),a()}window.spin={create:function(i,c,e){r((async()=>{t=i;const c=function(t){const n=`; ${document.cookie}`.split(`; ${t}=`);return 2===n.length?n.pop().split(";").shift():null}(o);c&&(n=c),e&&e()}))},detect:function(c={},e){r((async()=>{const r=c.referral_code_param||"ref";if(r){const c=(a=r,new URLSearchParams(window.location.search).get(a));if(c){const r={acc:t,refc:c};try{const t=await s(`${i}/visitor/`,"GET",null,{},r);!function(t,n,o=365,i="/"){const c=new Date;c.setTime(c.getTime()+24*o*60*60*1e3),document.cookie=`${t}=${n}; expires=${c.toUTCString()}; path=${i}`}(o,t.vid),n=t.vid,e&&e(null,t)}catch(t){e&&e(t,null)}return}}var a;e&&e(null,null)}))},customer:function(o,c={},e){r((async()=>{if(!n){return void(e&&e("Visitor id not found",null))}if(!o){return void(e&&e("Customer id not found",null))}const r={acc:t,vid:n,customer_id:o,options:c};try{const t=await s(`${i}/customer/`,"POST",r,{},{});e&&e(null,t)}catch(t){e&&e(t,null)}}))},conversion:function(o,c,e={},a){r((async()=>{if(!n){return void(a&&a("Visitor id not found",null))}if(!o){return void(a&&a("Conversion id not found",null))}const r={acc:t,vid:n,tid:o,amount:c||null,options:e};try{const t=await s(`${i}/conversion/`,"POST",r,{},{});a&&a(null,t)}catch(t){a&&a(t,null)}}))}}}();
